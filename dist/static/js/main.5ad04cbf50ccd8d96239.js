webpackJsonp([1],{100:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this._sceneList=[]}return t.prototype.addScene=function(t){this._sceneList.push(t)},t.prototype.getCurrentScene=function(){return this._currentRunScene},t.prototype.runScene=function(t){null!=this._currentRunScene&&this._currentRunScene.quit();var e=0;for(e;e<this._sceneList.length;e++)if(this._sceneList[e].name==t){this._currentRunScene=this._sceneList[e];break}return this._currentRunScene.render(),this._currentRunScene},t}();e.default=n},101:function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0}),i(16);var r=i(92),o=i(197),a=i(198),s=function(t){function e(e){var i=t.call(this)||this;return i._shouldRotate=!1,i._holder=e,i.init(),i}return n(e,t),e.getInstance=function(t){return null==e._instance&&(e._instance=new e(t)),e._instance},e.prototype.init=function(){this._playerOption=this.readOption(this._holder),this.initView(),this.addEventListeners(),this.updateScreenSize()},e.prototype.readOption=function(t){var e={};return e.contentWidth=Number(t.getAttribute("data-content-width"))||480,e.contentHeight=Number(t.getAttribute("data-content-height"))||800,e.orientation=String(t.getAttribute("data-orientation"))||o.default.AUTO,e.scaleMode=String(t.getAttribute("data-scale-mode"))||r.default.SHOW_ALL,e},e.prototype.initView=function(){this.renderer.resize(this._playerOption.contentWidth,this._playerOption.contentHeight),this.renderer.autoResize=!0;var t=this.view.style;t.cursor="inherit",t.position="absolute",t.top="0",t.bottom="0",t.left="0",t.right="0",this._holder.appendChild(this.view),t=this._holder.style,t.overflow="hidden",t.position="relative",t.webkitTransform="translateZ(0)"},e.prototype.addEventListeners=function(){var t=this;window.addEventListener("resize",function(){t.updateScreenSize()})},e.prototype.updateScreenSize=function(){var t=this._holder.getBoundingClientRect(),e=this._playerOption.orientation;e!=o.default.AUTO&&(this._shouldRotate=e!=o.default.PORTRAIT&&t.height>t.width||e==o.default.PORTRAIT&&t.width>t.height);var i=this._shouldRotate?t.height:t.width,n=this._shouldRotate?t.width:t.height,r=a.ScreenAdapter.calculateStageSize(this._playerOption.scaleMode,i,n,this._playerOption.contentWidth,this._playerOption.contentHeight);this.view.width!==r.stageWidth&&(this.view.width=r.stageWidth),this.view.height!==r.stageHeight&&(this.view.height=r.stageHeight),this.view.style.width=r.displayWidth+"px",this.view.style.height=r.displayHeight+"px";this._shouldRotate?e==o.default.LANDSCAPE?(90,this.view.style.top=(t.height-r.displayWidth)/2+"px",this.view.style.left=(t.width+r.displayHeight)/2+"px"):(-90,this.view.style.top=(t.height+r.displayWidth)/2+"px",this.view.style.left=(t.width-r.displayHeight)/2+"px"):(this.view.style.top=(t.height-r.displayHeight)/2+"px",this.view.style.left=(t.width-r.displayWidth)/2+"px")},Object.defineProperty(e.prototype,"playOption",{get:function(){return this._playerOption},enumerable:!0,configurable:!0}),e}(PIXI.Application);e.default=s},17:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t}();n.START_GAME="startGame",n.GAME_OVER="gameOver",e.default=n},193:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.complexHitTestObject=function(e,i){var n=t.complexIntersectionRectangle(e,i)||new PIXI.Rectangle;return!(n.width<1||n.height<1)},t.complexIntersectionRectangle=function(t,e){if(null!=t&&null!=e){var i=t.getBounds(),n=e.getBounds(),r=new PIXI.Rectangle;return r.x=Math.max(i.x,n.x),r.y=Math.max(i.y,n.y),r.width=Math.min(i.x+i.width-r.x,n.x+n.width-r.x),r.height=Math.min(i.y+i.height-r.y,n.y+n.height-r.y),r}},t}();e.default=n},194:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t}();n.ballColor=[1752734,12422335,6489184,14633289,2965072,15844367],n.xiaoXX=[0,0,1,2,2,1,0,1,2,0,2,2,3,4,4,3,2,3,4,2,4,4,4,5,3,3,1,4,0,0,1,2,2,1,0,1,2,0],e.default=n},195:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i(16);var n=i(101),r=i(100),o=i(98),a=i(97),s=i(17),l=i(99);new(function(){function t(){this.initPlayer(),this.initScene()}return t.prototype.initPlayer=function(){var t=document.getElementById("player-holder");this.player=n.default.getInstance(t)},t.prototype.initScene=function(){var t=this;this._sceneManager=new r.default,this._loadingScene=new o.default(this.player),this._gameScene=new a.default(this.player),this._overScene=new l.default(this.player),this._sceneManager.addScene(this._loadingScene),this._sceneManager.addScene(this._gameScene),this._sceneManager.addScene(this._overScene),this._sceneManager.runScene(o.default.NAME),this._loadingScene.once(s.default.START_GAME,function(){t._loadingScene.removeAllListeners(),t._sceneManager.runScene(a.default.NAME)}),this._overScene.on(s.default.START_GAME,function(){console.log("重新开始！"),t._sceneManager.runScene(a.default.NAME)}),this._gameScene.on(s.default.GAME_OVER,function(){t._sceneManager.runScene(l.default.NAME)})},t}())},196:function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(91),o=function(t){function e(e){var i=t.call(this,e)||this;return i._ticker=new PIXI.ticker.Ticker,i._ticker.add(i.scaleBall,i),i._ticker.start(),i}return n(e,t),e.prototype.initBall=function(){this.beginFill(this.color),this.drawCircle(0,0,30),this.endFill()},e.prototype.scaleBall=function(){this.scale.x*=1.25,this.scale.y*=1.25,this.alpha-=.1,this.alpha<=0&&(this._ticker.stop(),this._ticker.remove(this.scaleBall,this),this._ticker=null,this.parent&&this.parent.removeChild(this))},e}(r.default);e.default=o},197:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t}();n.AUTO="auto",n.PORTRAIT="portrait",n.LANDSCAPE="landscape",n.LANDSCAPE_FLIPPED="landscapeFlipped",e.default=n},198:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(92),r=function(){function t(){}return t.calculateStageSize=function(t,e,i,r,o){var a=e,s=i,l=r,h=o,c=e/l||0,u=i/h||0;switch(t){case n.default.EXACT_FIT:break;case n.default.NO_BORDER:c>u?s=Math.round(h*c):a=Math.round(l*u);break;case n.default.SHOW_ALL:c>u?a=Math.round(l*u):s=Math.round(h*c);break;default:l=e,h=i}return l%2!=0&&(l+=1),h%2!=0&&(h+=1),a%2!=0&&(a+=1),s%2!=0&&(s+=1),{stageWidth:l,stageHeight:h,displayWidth:a,displayHeight:s}},t}();e.ScreenAdapter=r},39:function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0}),i(16);var r=function(t){function e(e){var i=t.call(this)||this;return i.name="",i._stage=e.stage,i._renderer=e.renderer,i._tick=e.ticker,i}return n(e,t),Object.defineProperty(e.prototype,"stage",{get:function(){return this._stage},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderer",{get:function(){return this._renderer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ticker",{get:function(){return this._tick},enumerable:!0,configurable:!0}),e.prototype.render=function(){this._tick.add(this.update,this)},e.prototype.quit=function(){},e.prototype.update=function(){},e}(PIXI.Container);e.default=r},91:function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e){var i=t.call(this)||this;return i._color=e,i.initBall(e),i}return n(e,t),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},enumerable:!0,configurable:!0}),e.prototype.initBall=function(t){this.beginFill(t),this.drawCircle(0,0,30),this.endFill()},e}(PIXI.Graphics);e.default=r},92:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t}();n.SHOW_ALL="showAll",n.NO_BORDER="noBorder",n.EXACT_FIT="exactFit",e.default=n},97:function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(39),o=i(194),a=i(102),s=i(91),l=i(193),h=i(17),c=i(196),u=function(t){function e(i){var n=t.call(this,i)||this;return n._tapToStart=!0,n._touchCount=-1,n._musicNodeCount=-1,n._sourceCount=0,n._direction=1,n._targetBallSpeed=10,n.name=e.NAME,n}return n(e,t),e.prototype.selectMusic=function(){switch(parseInt(this.rang(0,0).toString(),10)){case 0:this._selectMusic=o.default.xiaoXX}},e.prototype.createBallBox=function(){this._ballBox=new PIXI.Container,this._topBall=new s.default(this._ballColorList[0]),this._ballBox.addChild(this._topBall),this._bottomBall=new s.default(this._ballColorList[1]),this._bottomBall.y=60,this._ballBox.addChild(this._bottomBall),this._leftWall=new PIXI.Graphics,this._leftWall.beginFill(65280,0),this._leftWall.drawRect(-40,0,20,60),this._leftWall.endFill(),this._ballBox.addChild(this._leftWall),this._rightWall=new PIXI.Graphics,this._rightWall.beginFill(65280,0),this._rightWall.drawRect(20,0,20,60),this._rightWall.endFill(),this._ballBox.addChild(this._rightWall),this._ballBox.pivot=new PIXI.Point(0,30)},e.prototype.createBallColor=function(){for(var t=0,e=o.default.ballColor.concat(),i=[];t<2;){var n=parseInt(this.rang(0,e.length).toString(),10);i.push(e[n]),e.splice(n,1),t++}return i},e.prototype.rang=function(t,e){return Math.random()*(e-t)+t},e.prototype.render=function(){t.prototype.render.call(this),this.selectMusic(),this._ballColorList=this.createBallColor(),this.createBallBox(),this._bgGraphics=new PIXI.Graphics,this._bgGraphics.beginFill(16777215),this._bgGraphics.drawRect(0,0,this.renderer.width,this.renderer.height),this._bgGraphics.endFill(),this.addChild(this._bgGraphics),this._touchPlayTF=new PIXI.Text("Tap to start",{fontFamily:"Arial",fontSize:80,fill:0,align:"center"}),this.addChild(this._touchPlayTF),this._touchPlayTF.x=(this.renderer.width-this._touchPlayTF.width)/2,this._touchPlayTF.y=220,this._sourceTF=new PIXI.Text("0",{fontFamily:"Arial",fontSize:60,fill:0,align:"center"}),this.addChild(this._sourceTF),this._sourceTF.y=220,this._sourceTF.x=-this._sourceTF.width,this.addChild(this._ballBox),this._ballBox.x=this.renderer.width/2,this._ballBox.y=(this.renderer.height-this._ballBox.height)/2+60,this._touchLayer=new PIXI.Sprite,this._touchLayer.width=this.renderer.width,this._touchLayer.height=this.renderer.height,this.addChild(this._touchLayer),this._touchLayer.interactive=!0,this._touchLayer.addListener("tap",this.rotationBallBox,this),this.stage.addChild(this)},e.prototype.rotationBallBox=function(){var t=this;if(this._tapToStart)return this._touchPlayTF.visible=!1,this._tapToStart=!1,a.TweenLite.to(this._sourceTF,.5,{x:(this.renderer.width-this._sourceTF.width)/2,ease:a.Expo.easeOut}),void a.TweenLite.delayedCall(1,function(){t.createBall()});this._touchLayer.removeListener("tap",this.rotationBallBox,this),this._touchCount++,a.TweenLite.to(this._ballBox,.5,{rotation:this.angleToRadian(180*(this._touchCount+1)),ease:a.Expo.easeOut,onComplete:function(){t.reAddTapListener()}})},e.prototype.angleToRadian=function(t){return t*(Math.PI/180)},e.prototype.radianToAng=function(t){return t*(180/Math.PI)},e.prototype.createBall=function(){var t=this._ballColorList[parseInt(this.rang(0,2).toString(),10)];Math.random()>.5?this._direction=1:this._direction=-1,this._targetBall=new s.default(t),1==this._direction?this._targetBall.y=-30:this._targetBall.y=this.renderer.height+30,this._targetBall.x=(this.renderer.width-this._targetBall.width)/2+30,this.addChild(this._targetBall)},e.prototype.reAddTapListener=function(){this._touchLayer.addListener("tap",this.rotationBallBox,this)},e.prototype.update=function(){null!=this._targetBall&&(this._targetBall.y+=this._targetBallSpeed*this._direction,l.default.complexHitTestObject(this._targetBall,this._topBall)&&(this.destroyTargetBall(),this._targetBall.color==this._topBall.color?(this.showShadow(this._targetBall.color),this.addScore(),this._sourceCount%10==0&&(this._targetBallSpeed+=.2),this.createBall()):this.gameOver()),l.default.complexHitTestObject(this._targetBall,this._bottomBall)&&(this.destroyTargetBall(),this._targetBall.color==this._bottomBall.color?(this.showShadow(this._targetBall.color),this.addScore(),this._sourceCount%10==0&&(this._targetBallSpeed+=.2),this.createBall()):this.gameOver()),l.default.complexHitTestObject(this._targetBall,this._leftWall)&&(this.destroyTargetBall(),this.gameOver()),l.default.complexHitTestObject(this._targetBall,this._rightWall)&&(this.destroyTargetBall(),this.gameOver()))},e.prototype.showShadow=function(t){var e=new c.default(t);this.addChild(e),e.x=(this.renderer.width-e.width)/2+30,e.y=(this.renderer.height-e.height)/2+30,this._musicNodeCount++},e.prototype.addScore=function(){this._sourceCount+=1,this._sourceTF.text=this._sourceCount.toString()},e.prototype.gameOver=function(){this.emit(h.default.GAME_OVER),this.ticker.remove(this.update,this)},e.prototype.destroyTargetBall=function(){this.removeChild(this._targetBall)},e.prototype.quit=function(){this.stage.removeChild(this),this._tapToStart=!0,this._targetBall=null,this._touchCount=-1,this._musicNodeCount=-1,this._sourceCount=0,this._direction=1,this._targetBallSpeed=10},e}(r.default);u.NAME="gameScene",e.default=u},98:function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(39),o=i(17),a=function(t){function e(i){var n=t.call(this,i)||this;return n.name=e.NAME,n._loader=new PIXI.loaders.Loader,n._loader.add("Button","../static/audio/Button.mp3"),n._loader.add("DoInce","../static/audio/DoInce.mp3"),n._loader.add("DoKalin","../static/audio/DoKalin.mp3"),n._loader.add("Fa","../static/audio/Fa.mp3"),n._loader.add("Fail","../static/audio/Fail.mp3"),n._loader.add("La","../static/audio/La.mp3"),n._loader.add("Mi","../static/audio/Mi.mp3"),n._loader.add("Re","../static/audio/Re.mp3"),n._loader.add("Si","../static/audio/Si.mp3"),n._loader.add("Sol","../static/audio/Sol.mp3"),n._loader.add("PlayBtn","../static/images/PlayBtn.png"),n.startLoading(),n}return n(e,t),e.prototype.startLoading=function(){var t=this;this._loader.addListener("progress",function(){}),this._loader.addListener("complete",function(){t.removeChild(t._loadingTF),t._playBtn=new PIXI.Sprite(t._loader.resources.PlayBtn.texture),t.addChild(t._playBtn),t._playBtn.x=(t.renderer.width-t._playBtn.width)/2,t._playBtn.y=(t.renderer.height-t._playBtn.height)/2,t._playBtn.interactive=!0,t._playBtn.addListener("tap",function(){t.emit(o.default.START_GAME)})}),this._loader.load()},e.prototype.render=function(){this._loadingBg=PIXI.Sprite.fromImage("../static/images/LoadingBg.jpg"),this.addChild(this._loadingBg),this._loadingTF=new PIXI.Text("Loading Assets...",{fontFamily:"Arial",fontSize:24,fill:15981747,align:"center"}),this._loadingTF.x=(this.renderer.width-this._loadingTF.width)/2,this._loadingTF.y=(this.renderer.height-this._loadingTF.height)/2,this.addChild(this._loadingTF),this.stage.addChild(this)},e.prototype.quit=function(){this.stage.removeChild(this),this._loadingTF=null,this._loadingBg=null,this._playBtn=null},e}(r.default);a.NAME="loadingScene",e.default=a},99:function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(39),o=i(17),a=function(t){function e(i){var n=t.call(this,i)||this;return n.name=e.NAME,n}return n(e,t),e.prototype.render=function(){var t=this;this._overBg=PIXI.Sprite.fromImage("../static/images/LoadingBg.jpg"),this.addChild(this._overBg),this._overBg.interactive=!0,this._overBg.addListener("tap",function(){t.emit(o.default.START_GAME)}),this.stage.addChild(this)},e.prototype.quit=function(){},e}(r.default);a.NAME="OverScene",e.default=a}},[195]);